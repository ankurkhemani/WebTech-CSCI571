
<?doctype html>

<html>

    <head>
       
       <title>XML Parser</title>
       <meta name="viewport" content="width=device-width initial-scale=1"/>
       <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
       <link href="hw4.css" rel="stylesheet" type="text/css" />
       
       <script type="text/javascript">

      function submitAction(){
 
      var XmlFileName=document.getElementById("FileUploadField").value;
       if(XmlFileName=="")
 
  {
   alert("Please enter a file name.");
   return;
  }
 xmlDoc = loadXML(XmlFileName);
 


 if (window.ActiveXObject) //if IE, simply execute script (due to async prop).
 {  
 
     if (xmlDoc.parseError.errorCode != 0) 
     {
        var myErr = xmlDoc.parseError;
        alert("Invalid file format.");
        return;
        } 
      else {  
                  generateHTML(xmlDoc);
                  hWin = window.open("", "Assignment4", "height=600,width=900");
                  hWin.document.write(html_text);  
             }
    }
    
    
 
  else //else if FF, execute script once XML object has loaded
 { 
 
     if (xmlDoc.documentElement.nodeName == "parsererror")
     {
     alert("Invalid file format.");
     return;
     }
     else{
        var rows=xmlDoc.getElementsByTagName("Row");
        if(rows.length==0)
        {
        alert("The network list is empty.");
        return;
        }
        else
        {
        xmlDoc.onload=generateHTML(xmlDoc);
        hWin = window.open("", "Assignment4", "height=600,width=900,scrollbars=yes");
        hWin.document.write(html_text); 
}
}

}

hWin.document.close();  


}



function generateHTML(xmlDoc)

   {      
           html_text="<html><head><title>XML Parse Result</title></head><bo"+"dy>";
           html_text+="<table border='2'>";
           html_text+="<thead><tr>";
           var header=xmlDoc.getElementsByTagName("Header").item(0);
           var data=header.getElementsByTagName("Data");
           
           for(var i=0;i<data.length;i++){
           
           html_text+="<th>"+data.item(i).firstChild.nodeValue+"</th>"
           
           }
           html_text+="</tr></thead>";
           html_text+="<tbody>";
           
           var rows=xmlDoc.getElementsByTagName("Row");
           for(var i=0;i<rows.length;i++)
           {
           
           html_text+="<tr>";

           if(rows.item(i).getElementsByTagName("Network").item(0).firstChild)
           {
           html_text+="<td>"+rows.item(i).getElementsByTagName("Network").item(0).firstChild.nodeValue+"</td>";
           }
           else{
           html_text+="<td></td>";
           }
            if(rows.item(i).getElementsByTagName("Owner").item(0).firstChild)
           {
           html_text+="<td>"+rows.item(i).getElementsByTagName("Owner").item(0).firstChild.nodeValue+"</td>";
           }
           else{
           html_text+="<td></td>";
           }
          
          
           var feeds=rows.item(i).getElementsByTagName("Feed");
            html_text+="<td>";
            html_text+="<ul>";

           for(var k=0;k<feeds.length;k++)
           {
            if(feeds.item(k).firstChild)
            html_text+="<li>"+feeds.item(k).firstChild.nodeValue+"</li>";
          }
            html_text+="</ul>";
            html_text+="</td>";

         if(rows.item(i).getElementsByTagName("Notes").item(0).firstChild)
           {
           html_text+="<td>"+rows.item(i).getElementsByTagName("Notes").item(0).firstChild.nodeValue+"</td>";
           }
           else{
           html_text+="<td></td>";
           }
           
           if(rows.item(i).getElementsByTagName("HomePage")[0].firstChild)
           {
           html_text+="<td><a href=\""+ rows.item(i).getElementsByTagName("HomePage")[0].firstChild.nodeValue+"\">"+rows.item(i).getElementsByTagName("HomePage")[0].firstChild.nodeValue+"</a></td>";
           }
           else{
           html_text+="<td></td>";
           }
           
           if(rows.item(i).getElementsByTagName("Logo")[0].firstChild)
           {
           html_text+="<td><img src='"+rows.item(i).getElementsByTagName("Logo").item(0).firstChild.nodeValue+"'"+"/></td>";
           }
           else{
           html_text+="<td></td>";
           }
           
            html_text+="</tr>";
           }

           html_text+="</tbody>";  html_text+="</table>";
           html_text+="<noscript></bo"+"dy></html>";  
 
        
           
           }

function loadXML(url)
 {

      if (window.XMLHttpRequest)
       {
       xmlhttp=new XMLHttpRequest();   
       }
      else 
       {
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); 
       }
      xmlhttp.open("GET",url,false);
      
      try{
      xmlhttp.send();
      }
      
      catch(e)
      {
       alert("File Not Found"); exit(0);
      }
      
      xmlDoc=xmlhttp.responseXML;
      if(xmlhttp.status==404)
      {
      alert("File not found");
      exit(0);
      }
      else{
      return xmlDoc; 
      }
      
       
 
 }
 
 
 
 
 
 </script>
<style>

.UserInput{
 width:450px;
 margin:50px auto;
 font-family:Times;
 text-align:center;
 color:#424242;


}


#FileUploadField{
 width:180px;
 height:25px;
 border:1px solid  #BDBDBD;
 border-top:2.5px solid  #BDBDBD;
 

}

h1{
 font-size:1.2em;
 margin:0;
 padding:0;
  font-weight:normal;
}

.SubmitButton{

 width:120px;
 height:28px;
 border-radius:3.5px;
 background:#D8D8D8;
 font-size:0.9em;
 padding:2px;
 border:1.8px solid #A4A4A4;
 
 

}

</style>

</head>




<body>

   <div class="UserInput">

         <form>
             <h1>Enter URL for Company List XML File</h1><br>
             <input type="text" id="FileUploadField" name="xmlFileName"/><br><br>
             <input type="submit" value="Submit Query" class="SubmitButton" onclick="submitAction()"/>
         </form>

  </div>

<noscript><div style="display: block; font-family: Verdana, Geneva, Arial; font-size: 10px">
The University of Southern California does not screen or control the content on this website and thus does not guarantee the accuracy, integrity, or quality of such content.  All content on this website is provided by and is the sole responsibility of the person from which such content originated, and such content does not necessarily reflect the opinions of the University administration or the Board of Trustees
</div>
</body>


</html>